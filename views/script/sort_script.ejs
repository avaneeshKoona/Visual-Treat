<script> 

  /*
  *************************************************
      CODE BY : AVANEESH KOONA
      GIHUB   : https://github.com/avaneeshKoona
      E-MAIL  : kavaneesh19@gmail.com
  *************************************************
*/

  var arr = []; //Globally declared array
  const SPEED = 17;

  while(arr.length < 40){
    var r = Math.floor(Math.random() * 50) + 1;
    if(arr.indexOf(r) === -1) arr.push(r);
  } 


  async function generateArray(){  // generateArray function

    document.getElementById("arrayWindow").style.alignItems = "flex-end";

    let node = document.getElementById("btn");
    if (node.parentNode) // removing generateArray button
    {
      node.parentNode.removeChild(node);
    }



    for(var i=0;i<40;i++)
    {
      await addBars(i);  // function to append bars to the arrayWindow
    }


    let sortButton = document.createElement("button"); // adding sort button after appending array bars

    sortButton.setAttribute("id","sortBtn");

    var addAttribute = document.createAttribute("onclick");
    addAttribute.value ="sort(0,39)";
    sortButton.setAttributeNode(addAttribute);
     
    document.body.appendChild(sortButton);
    document.getElementById("sortBtn").innerHTML = "SORT";
  }


  function addBars(i)
  {
      setTimeout(function() { 
        let newBar = document.createElement("div");
        newBar.setAttribute("class", "ele");

        newBar.setAttribute("id", "div"+i);

        document.getElementById("arrayWindow").appendChild(newBar);
        document.getElementById("div"+i).innerHTML = arr[i];
        document.getElementById("div"+i).style.height = arr[i]*10+"px";
      },17*i);
  }

  
  async function sort(l,h)
  {
    var chosenMethod = document.getElementsByName("sortType");
    var sortMethod;
    for(var i=0; i<chosenMethod.length;i++)
    {
      if(chosenMethod[i].checked)
      {
        sortMethod = chosenMethod[i].value;
      }
    }

    switch(sortMethod)
    {
      case "bubbleSort":
        document.getElementById("sortBtn").disabled = true;
        await bubbleSort();
        document.getElementsByClassName("heading")[0].innerHTML = "YOU DID IT :)"
        document.getElementById("sortBtn").disabled = false;
        console.log(arr);
        break;

      case "insertionSort":
        document.getElementById("sortBtn").disabled = true;
        await insertionSort();
        document.getElementsByClassName("heading")[0].innerHTML = "YOU DID IT :)"
        document.getElementById("sortBtn").disabled = false;
        console.log(arr);
        break;

      case "mergeSort": 
        document.getElementById("sortBtn").disabled = true;
        await merge(l,h);
        document.getElementsByClassName("heading")[0].innerHTML = "YOU DID IT :)"
        document.getElementById("sortBtn").disabled = false;
        console.log(arr);
        break;

      default: 
        alert("please choose a sorting method :)");
        break;
    }
  }

 function animate(divId,color)
 {
   document.getAnimations(divId).style.backgroundColor = "{color}"
 }

<%-include("algorithms/bubbleSort")%>
<%-include("algorithms/insertionSort")%> 
<%-include("algorithms/mergeSort")%> 

</script>

